var K=Object.defineProperty,V=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var j=(n,t,s)=>t in n?K(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,T=(n,t)=>{for(var s in t||(t={}))Q.call(t,s)&&j(n,s,t[s]);if(W)for(var s of W(t))X.call(t,s)&&j(n,s,t[s]);return n},I=(n,t)=>V(n,J(t));import{a as Z,j as R,r as c,N as A,L as B,F as k,f as ee,b as te,c as se,G as ne,M as ae,u as H,d as M,e as re,g as E,h as ie,R as Y,i as oe,k as C,l as le,B as ce}from"./vendor.37420d0b.js";const de=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}};de();const U=Z.create({baseURL:"https://bonvoyage-app.herokuapp.com/",withCredentials:!0});U.interceptors.request.use(n=>{const t=localStorage.getItem("authToken");return t&&(n.headers.Authorization=`Bearer ${t}`),n});//! Error handling to use in the catch
function $(n){throw n.response.data,n}const S=I(T({},U),{signup(n){return U.post("/api/auth/signup",n).then(t=>t.data).catch($)},isLoggedIn(n){return U.get("/api/auth/me",{headers:{Authorization:`Bearer ${n}`}}).then(t=>t.data).catch($)},signin(n){return U.post("/api/auth/signin",n).then(t=>t.data).catch($)}}),e=R.exports.jsx,r=R.exports.jsxs,w=R.exports.Fragment,pe=()=>r("div",{className:"homebody",children:[e("style",{children:"@import url('https://fonts.googleapis.com/css2?family=Domine:wght@500&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500&display=swap');"}),r("div",{className:"hometext",children:[e("h2",{children:"Explore travel itineraries by place, theme or duration"}),e("h2",{children:"Add your own trips and rate others"})]})]}),z=c.exports.createContext(),P=()=>c.exports.useContext(z),ue=()=>{const{isLoggedIn:n,removeUser:t}=P();return r("div",{className:"navbar",children:[e("style",{children:"@import url('https://fonts.googleapis.com/css2?family=Domine:wght@500&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500&display=swap');"}),e(A,{to:"/",children:"Home"}),e(A,{to:"/trips",children:"Trips"}),e("a",{href:"/",children:e("h1",{className:"logo",children:"bon voyage"})}),!n&&r(w,{children:[e(A,{to:"/signin",children:"Sign in"}),e(A,{to:"/signup",children:"Sign up"})]}),n&&r(w,{children:[e(A,{to:"/profile",children:"Profile"}),e("p",{onClick:t,children:"Log out"})]})]})},he=({searchedString:n,callbackSearch:t})=>e("div",{children:e("input",{className:"search",type:"text",placeholder:"Enter your destination...",value:n,onChange:s=>t(s.target.value)})}),me=["budget","comfortable","luxury","family","adventure","culture","shopping","romantic","party","gastronomic","nature"],ge=({filteredCats:n,callbackFilter:t})=>e("div",{children:e("div",{className:"catfilters",children:me.map(s=>e("div",{children:r("div",{children:[e("input",{type:"checkbox",id:s,name:s,value:s,onChange:l=>t(l.target.value,l.target.checked)}),e("label",{children:s})]})},s))})});const fe=({duration:n,filterDays:t})=>r("div",{children:[e("p",{className:"daytitle",children:"Duration (max days)"}),e(w,{children:e("input",{onChange:s=>t(s.target.value),className:"duration",type:"number",name:"duration",min:"0",value:n})})]}),ve=({trips:n})=>{const[t,s]=c.exports.useState(""),[l,i]=c.exports.useState(n),[a,o]=c.exports.useState([]),[p,g]=c.exports.useState("");if(!n)return e("div",{children:"Loading"});const[h,y]=c.exports.useState(!1),v=()=>{y(!h)},D=(f,_)=>{o(_?[...a,f]:a.filter(x=>x!==f))};return c.exports.useEffect(()=>{l.map(f=>{console.log(f.days.length<=p)})},[p]),c.exports.useEffect(()=>{let f,_,x;t!==""?(f=n.filter(m=>m.location.toLowerCase().includes(t.toLowerCase())),i(f)):f=n,a.length>0?(_=f.filter(m=>{const d=a.filter(u=>{if(m.categories.includes(u))return m});if(d.length!==0)return d}),f=_,i(_)):i(f),p>0?(x=f.filter(m=>{if(m.days.length<=p)return m}),i(x)):i(f)},[n,t,a,p]),r("div",{className:"tripsbody",children:[e("style",{children:"@import url('https://fonts.googleapis.com/css2?family=Domine:wght@500&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500&display=swap');"}),e("h3",{className:"pagetitle",children:"Search trips by destination, theme or duration"}),r("div",{className:"searchbar",children:[e(he,{searchedString:t,callbackSearch:s}),e("button",{className:"toggleBtn",onClick:v,children:e("i",{className:"fas fa-filter fa-2x"})})]}),h&&r("div",{className:"filters",children:[e(ge,{filteredCats:a,callbackFilter:D}),e(fe,{duration:p,filterDays:g})]}),e("p",{className:"instruct",children:"Click on a trip to see the full itinerary"}),e("div",{className:"tripscontainer",children:l.map(f=>e("div",{className:"trip",children:r(B,{to:f._id,children:[r("div",{className:"triptext",children:[e("h3",{className:"title",children:f.title}),e("p",{children:f.description}),r("p",{children:[e("i",{className:"fas fa-map-marker-alt"})," ",f.location]}),e("p",{children:f.categories.join(", ")}),r("p",{children:["Contributor: ",f.author.username]}),r("p",{children:[f.favedBy.length," ",e("i",{className:"fa-solid fa-heart"})]})]}),e("img",{src:f.image[0],alt:""}),r("p",{className:"daynumber",children:[e("i",{className:"far fa-calendar-alt"})," DAYS: ",f.days.length]})]})},f._id))})]})},ye="_container_l800p_1",be="_carousel_l800p_9",Se="_buttons_l800p_51",Ne="_carouselBtns_l800p_61",_e="_chevron_l800p_61";var L={container:ye,carousel:be,buttons:Se,carouselBtns:Ne,chevron:_e};const xe=({trip:n})=>{var i;c.exports.useState(n.image);const t=c.exports.useRef(null),s=a=>{a.preventDefault(),t.current.scrollLeft-=t.current.offsetWidth},l=a=>{a.preventDefault(),t.current.scrollLeft+=t.current.offsetWidth};return console.log("current pic:",t.current),r("div",{children:[e("div",{className:L.container,children:e("div",{className:L.carousel,ref:t,children:(i=n.image)==null?void 0:i.map((a,o)=>e("div",{className:L.image,children:e("img",{src:a,alt:""})},o))})}),r("div",{className:L.carouselBtns,children:[e("button",{className:L.chevron,onClick:s,children:e(k,{icon:ee})}),e("button",{className:L.chevron,onClick:l,children:e(k,{icon:te})})]})]})},Ce=({id:n})=>{const t={height:"100vh",width:"60%"},[s,l]=c.exports.useState({}),i=o=>{const p={lat:o.coords.latitude,lng:o.coords.longitude};l(p)};c.exports.useEffect(()=>{navigator.geolocation.getCurrentPosition(i)});const a=o=>{const p=o.latLng.lat(),g=o.latLng.lng();l({lat:p,lng:g})};return e(se,{googleMapsApiKey:"AIzaSyDEaeUiFD9oAnB1LNDiK-GWyDq6zS9HWS4",children:e(ne,{mapContainerStyle:t,zoom:13,center:s,children:s.lat?e(ae,{position:s,onDragEnd:o=>a(o),draggable:!0}):null})})},we="_detailsBody_40lcf_1",De="_numberBlock_40lcf_23",ke="_containerDetails_40lcf_53",Le="_infosBlock_40lcf_71",Fe="_containerWrapper_40lcf_85",Te="_biggerPic_40lcf_95",Ie="_detailsHeader_40lcf_105",Ae="_btn_40lcf_139",Be="_activitiesTitle_40lcf_161",Ee="_fontIcons_40lcf_171";var N={detailsBody:we,numberBlock:De,containerDetails:ke,infosBlock:Le,containerWrapper:Fe,biggerPic:Te,detailsHeader:Ie,btn:Ae,activitiesTitle:Be,fontIcons:Ee};const Ue=({favesClick:n,faves:t})=>{const[s,l]=c.exports.useState({}),{id:i}=H(),{currentUser:a,isLoggedIn:o,storeToken:p}=P();return c.exports.useEffect(()=>{S.get("http://localhost:8000/trips/"+i).then(({data:g})=>{l(g)}).catch(g=>console.log(g))},[i]),e("div",{className:N.detailsBody,children:s.days?r(w,{children:[r("div",{className:N.detailsHeader,children:[e("h1",{children:s.title}),r("h2",{children:[e(k,{icon:M})," ",s.location]}),e("h3",{children:s.description}),r("h3",{children:["Contributed by: ",s.author.username]})]}),e("div",{}),e("div",{children:e("img",{className:N.biggerPic,src:s.image[0],alt:""})}),r("h3",{children:["Favourited by: ",s.favedBy.length," ",e("i",{className:"fa-solid fa-heart"})]}),o&&r("div",{className:"tripsbtn",children:[!t.includes(i)&&r("button",{onClick:()=>n(i),children:["Favourite ",e("i",{className:"fa-solid fa-sun"})]}),t.includes(i)&&r("button",{onClick:()=>n(i),children:["Unfavourite"," ",e("i",{className:"fa-solid fa-cloud-showers-heavy"})]})]}),e(B,{to:"/trips",children:e("button",{children:"Back to trips"})}),e("div",{className:N.containerWrapper,children:s.days.map(g=>r("div",{className:N.containerDetails,children:[e("div",{className:N.numberBlock,classkey:g._id,children:e("p",{children:g.number})}),e("div",{className:N.infosBlock,children:g.activities.map(h=>r("div",{children:[e("p",{className:N.activitiesTitle,children:h.title}),r("p",{children:[r("b",{children:[e(k,{className:N.fontIcons,icon:M})," "]}),h.address]}),r("p",{children:[r("b",{children:[e(k,{className:N.fontIcons,icon:re})," "]}),h.description]}),e("br",{})]},h._id))})]},g._id))}),e(xe,{trip:s}),e(Ce,{id:i})]}):e("p",{children:"Sorry, no trip yet!"})})},q=n=>{const[t,s]=c.exports.useState(n);return[t,i=>{s(I(T({},t),{[i.target.name]:i.target.value}))}]},Pe=()=>{const[n,t]=q({email:"",password:""}),[s,l]=c.exports.useState(null),i=E(),{authenticateUser:a,storeToken:o}=P(),p=g=>{g.preventDefault(),S.signin(n).then(h=>{console.log("this is signin front:",h),o(h.authToken),a(),i("/")}).catch(h=>{console.error(h),l(h.response)})};return r(w,{children:[s&&e("h3",{className:"error",children:s.message}),r("form",{className:"authform",onSubmit:p,children:[e("h2",{children:"Sign in"}),e("label",{htmlFor:"email",children:"Email"}),e("input",{type:"email",id:"email",name:"email",onChange:t,value:n.email}),e("label",{htmlFor:"password",children:"Password"}),e("input",{type:"password",id:"password",name:"password",onChange:t,value:n.password}),e("button",{children:"Sign in"})]})]})};const Re=()=>r("div",{className:"signinbody",children:[r("style",{children:["@import url('https://fonts.googleapis.com/css2?family=Domine:wght@500&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600&display=swap');"," "]}),e(Pe,{})]}),$e=()=>{const[n,t]=q({name:"",username:"",email:"",password:""}),[s,l]=c.exports.useState(null),i=E(),a=o=>{o.preventDefault(),S.signup(n).then(p=>{console.log("this is signup front:",p),i("/signin")}).catch(p=>{l(p.response.data)})};return r(w,{children:[s&&e("h3",{className:"error",children:s.message}),r("form",{className:"authform",onSubmit:a,children:[e("h2",{children:"Sign up"}),e("label",{htmlFor:"name",children:"Name"}),e("input",{onChange:t,value:n.name,type:"text",id:"name",name:"name"}),e("label",{htmlFor:"username",children:"Username"}),e("input",{onChange:t,value:n.username,type:"text",id:"username",name:"username"}),e("label",{htmlFor:"email",children:"Email"}),e("input",{onChange:t,value:n.email,type:"email",id:"email",name:"email"}),e("label",{htmlFor:"password",children:"Password"}),e("input",{onChange:t,value:n.password,type:"password",id:"password",name:"password"}),e("button",{children:"Create account"})]})]})},Oe=()=>r("div",{className:"signupbody",children:[r("style",{children:["@import url('https://fonts.googleapis.com/css2?family=Domine:wght@500&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600&display=swap');"," "]}),e($e,{})]}),We="_profileWrapper_1pl6g_3",je="_profileSection_1pl6g_45",He="_addTripContainer_1pl6g_65",Me="_createtrip_1pl6g_95",Ye="_plusIcon_1pl6g_127",ze="_favoritesProfile_1pl6g_141",qe="_favtrips_1pl6g_157",Ge="_proftrip_1pl6g_183",Ke="_proftriptitle_1pl6g_215",Ve="_profbuttons_1pl6g_239";var b={profileWrapper:We,profileSection:je,addTripContainer:He,createtrip:Me,plusIcon:Ye,favoritesProfile:ze,favtrips:qe,proftrip:Ge,proftriptitle:Ke,profbuttons:Ve};const Je=()=>{P();const[n,t]=c.exports.useState([]),[s,l]=c.exports.useState([]);c.exports.useEffect(()=>{S.get("/users/profile/faves").then(({data:a})=>{t(a.favourites)}).catch(a=>console.error(a))},[]),c.exports.useEffect(()=>{S.get("/users/profile/added").then(({data:a})=>{l(a)}).catch(a=>console.error(a))},[]);const i=async a=>{try{await S.delete(`/trips/${a}/delete`),S.get("/users/profile/added").then(({data:o})=>{l(o)}).catch(o=>console.error(o))}catch(o){console.error(o)}};return r("div",{className:b.profileWrapper,children:[e("style",{children:"@import url('https://fonts.googleapis.com/css2?family=Domine:wght@500&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500&display=swap');"}),r("div",{className:b.profileSection,children:[e("section",{className:b.addTripContainer,children:e("div",{className:b.createtrip,children:r(B,{to:"/profile/create",children:[e("h2",{children:"Let others discover your trips!"}),e(w,{children:e(k,{icon:ie,className:b.plusIcon})}),e("h2",{children:"Create itinerary"})]})})}),e("h2",{children:"Your favourite itineraries"}),e("section",{className:b.favoritesProfile,children:e("div",{className:b.favtrips,children:n.map(a=>r("div",{className:b.proftrip,children:[e("p",{className:b.proftriptitle,children:a.title}),e("p",{children:a.description}),r("p",{children:[e("i",{className:"fas fa-map-marker-alt"})," ",a.location]}),e("img",{src:a==null?void 0:a.image[0],alt:""}),e(B,{to:`/trips/${a._id}`,children:e("button",{children:"See full itinerary"})})]},a._id))})}),e("h2",{children:"Your added trips"}),e("section",{className:b.favoritesProfile,children:e("div",{className:b.favtrips,children:s.map(a=>r("div",{className:b.proftrip,children:[e("p",{className:b.proftriptitle,children:a.title}),e("p",{children:a.description}),r("p",{children:[e("i",{className:"fas fa-map-marker-alt"})," ",a.location]}),e("img",{src:a==null?void 0:a.image[0],alt:""}),r("div",{className:b.profbuttons,children:[e("a",{href:`/profile/${a._id}/update`,children:e("i",{className:"fa-solid fa-pen"})}),e(B,{to:`/trips/${a._id}`,children:e("button",{children:"See full itinerary"})}),e("a",{onClick:()=>i(a._id),children:e("i",{className:"fa-solid fa-trash-can"})})]})]},a._id))})})]})]})};let O;const Qe=(n,t)=>{let s=document.createElement("script");s.type="text/javascript",s.readyState?s.onreadystatechange=function(){(s.readyState==="loaded"||s.readyState==="complete")&&(s.onreadystatechange=null,t())}:s.onload=()=>t(),s.src=n,document.getElementsByTagName("head")[0].appendChild(s)};function Xe(n,t){O=new window.google.maps.places.Autocomplete(t.current),O.addListener("place_changed",()=>Ze(n))}async function Ze(n){const t=O.getPlace(),{lat:s,lng:l}=t.geometry.location;n({name:"address",value:t.formatted_address,address:t.formatted_address,coords:{coordinates:[s(),l()]}}),console.log("addressObject",t)}function et({address:n,activityChange:t,activityNumber:s}){const[l,i]=c.exports.useState(n),a=c.exports.useRef(null);c.exports.useEffect(()=>{Qe("https://maps.googleapis.com/maps/api/js?key=AIzaSyDEaeUiFD9oAnB1LNDiK-GWyDq6zS9HWS4&libraries=places",()=>Xe(i,a))},[]),c.exports.useEffect(()=>{console.log("~query changed"),t({target:l})},[l]);const o=p=>{};return console.log("> QUERY >>>",l),r("div",{className:"search-location-input",children:[e("label",{htmlFor:"address-"+s,children:"Address"}),e("input",{type:"text",name:"address",id:"address-"+s,ref:a,onChange:o,placeholder:""})]})}const tt=({activity:n,setDays:t,activityNumber:s,dayNumber:l,update:i})=>{const a=o=>{console.log(o.target,"<<< ici"),t(p=>{const g=[...p];return i?g[l].activities[s]=I(T({},g[l].activities[s]),{[o.target.name]:o.target.value}):g[l][s]=I(T({},g[l][s]),{[o.target.name]:o.target.value}),g})};return r("div",{className:"crudform",children:[r("div",{children:[e("label",{htmlFor:"activityTitle-"+s,children:"Title"}),e("input",{type:"text",name:"title",id:`activityTitle-${s}`,className:"crud-long-input",value:n.title,onChange:a})]}),e("div",{children:e(et,{address:n.address,activityNumber:s,activityChange:a})}),r("div",{children:[e("label",{htmlFor:"activityDescription-"+s,children:"Description"}),e("input",{type:"text",name:"description",className:"crud-long-input",value:n.description,onChange:a})]})]})},G=({dayNumber:n,activities:t,setDays:s,update:l})=>{console.log("It's a brand new day !");const i=a=>{a.preventDefault(),s(o=>{const p=[...o];return l?p[n].activities=[...p[n].activities,{title:"",address:"",description:""}]:p[n]=[...p[n],{title:"",address:"",description:""}],p})};return console.log("Activities :",t),t?r("div",{className:"crudform",children:[r("div",{className:"activitycount",children:[r("h2",{children:["Day n\xB0 ",n+1]}),r("h3",{children:[e("i",{class:"fa-solid fa-person-snowboarding"})," ACTIVITIES:"," ",t.length," "]})]}),t.map((a,o)=>e(tt,{activity:a,dayNumber:n,activityNumber:o,setDays:s,update:l},o)),r("button",{onClick:i,className:"activitybutton",children:["ADD ACTIVITY ",e("i",{class:"fa-solid fa-plus"})]})]}):null};const st=()=>{const[n,t]=c.exports.useState(""),[s,l]=c.exports.useState([]),[i,a]=c.exports.useState(""),[o,p]=c.exports.useState(""),g=c.exports.useRef(),[h,y]=c.exports.useState([[{title:"",address:"",description:""}]]),v=E(),D=["budget","comfortable","luxury","family","adventure","culture","shopping","romantic","party","gastronomic","nature"],f=m=>{m.preventDefault(),y(d=>[...d,[{title:"",address:"",description:""}]])},_=m=>{if(m.target.checked)l([...s,m.target.value]);else{const d=s.filter(u=>u!==m.target.value);l(d)}},x=m=>{m.preventDefault();const d=new FormData;d.append("title",n),d.append("categories",s),d.append("location",i),d.append("description",o),d.append("image",g.current.files[0]),d.append("days",JSON.stringify(h)),console.log("FORM DATA ------>",d),console.log("---> What are you 'days' ?",h),S.post("/trips",d).then(u=>{console.log("RES apiHandler",u),v("/profile")}).catch(u=>console.log(u))};return console.log("------- CURRENT STATE OF TRIP IS -----"),r("div",{className:"crudbody",children:[e("h2",{children:"Create a travel itinerary"}),e("div",{className:"maintripform",children:r("form",{className:"crudform",onSubmit:x,children:[r("div",{children:[e("label",{htmlFor:"title",children:" Title "}),e("input",{type:"text",id:"title",className:"crud-long-input",value:n,onChange:m=>t(m.target.value)})]}),r("div",{children:[e("label",{htmlFor:"location",children:" Location "}),e("input",{type:"text",id:"location",className:"crud-long-input",value:i,onChange:m=>a(m.target.value)})]}),e("div",{className:"crud-cats",children:D.map((m,d)=>r(Y.Fragment,{children:[e("input",{type:"checkbox",id:`category-${m}-${d}`,value:m,onChange:_}),e("label",{htmlFor:`category-${m}-${d}`,children:m})]},d))}),r("div",{children:[e("label",{htmlFor:"description",children:" Description "}),e("input",{type:"text",id:"description",className:"crud-long-input",value:o,onChange:m=>p(m.target.value)})]}),e("p",{children:"Upload a picture from your trip:"}),e("input",{ref:g,name:"image",type:"file"}),r("h3",{className:"daycount",children:[e("i",{className:"far fa-calendar-alt"})," DAYS: ",h==null?void 0:h.length]}),r("button",{onClick:f,children:["ADD DAY ",e("i",{className:"fa-solid fa-plus"})]}),h.map((m,d)=>e(G,{activities:h[d],setDays:y,dayNumber:d},d)),e("div",{className:"crud-submit",children:e("button",{onClick:x,children:"Good"})})]})})]})};function nt(){const n=E(),t=H(),[s,l]=c.exports.useState(""),[i,a]=c.exports.useState([]),[o,p]=c.exports.useState(""),[g,h]=c.exports.useState(""),y=c.exports.useRef(),[v,D]=c.exports.useState(null),f=["budget","comfortable","luxury","family","adventure","culture","shopping","romantic","party","gastronomic","nature"];c.exports.useEffect(()=>{(async()=>{const{data:u}=await S.get("/trips/"+t.id);console.log(u),l(u.title),a(u.categories),p(u.location),h(u.description),D(u.days)})()},[t.id]);const _=d=>{d.preventDefault(),D(u=>[...u,{activities:[{title:"",address:"",description:""}],number:u.length+1}])},x=d=>{if(d.target.checked)a([...i,d.target.value]);else{const u=i.filter(F=>F!==d.target.value);a(u)}},m=async d=>{console.log("i am in handle submit"),d.preventDefault();const u=new FormData;u.append("title",s),u.append("categories",i),u.append("location",o),u.append("description",g),u.append("image",y.current.files[0]),u.append("days",JSON.stringify(v));try{const{data:F}=await S.patch("/trips/"+t.id,u);console.log("data updated :",F),n("/profile")}catch(F){console.log(F)}};return v?e(w,{children:r("div",{children:[e("h2",{children:"UPDATE YOUR TRIP"}),r("form",{className:"tripform",onSubmit:m,children:[r("div",{children:[e("label",{htmlFor:"title",children:" Title "}),e("input",{type:"text",id:"title",value:s,onChange:d=>l(d.target.value)})]}),r("div",{children:[e("label",{htmlFor:"location",children:" Location "}),e("input",{type:"text",id:"location",value:o,onChange:d=>p(d.target.value)})]}),e("div",{children:f.map((d,u)=>r(Y.Fragment,{children:[e("input",{type:"checkbox",id:`category-${d}-${u}`,value:d,onChange:x}),e("label",{htmlFor:`category-${d}-${u}`,children:d})]},u))}),r("div",{children:[e("label",{htmlFor:"description",children:" Description "}),e("input",{type:"text",id:"description",value:g,onChange:d=>h(d.target.value)})]}),e("input",{ref:y,name:"image",type:"file"}),e("button",{onClick:_,children:"Add a day"}),r("p",{children:["Number of days ",v==null?void 0:v.length," "]}),v.map((d,u)=>e(G,{activities:v[u].activities,setDays:D,dayNumber:u,update:!0},u)),e("button",{onClick:m,children:"Good"})]})]})}):e("p",{children:"Loading"})}function at(){const[n,t]=c.exports.useState([]),[s,l]=c.exports.useState([]),[i,a]=c.exports.useState([]),{currentUser:o,isLoggedIn:p,storeToken:g}=P();return c.exports.useEffect(()=>{S.get("/trips").then(({data:y})=>{t(y)}).catch(y=>console.error(y))},[]),c.exports.useEffect(()=>{o&&l(o.favourites)},[p]),r("div",{className:"App",children:[e(ue,{}),r(oe,{children:[e(C,{path:"/",element:e(pe,{trips:n})}),e(C,{path:"/trips",element:e(ve,{trips:n})}),e(C,{path:"/trips/:id",element:e(Ue,{trips:n,favesClick:y=>{S.patch("/users/favourites/"+y).then(({data:v})=>{l(v.updatedUser.favourites),a(v.updatedTrip.favedBy),console.log("all data",v)}).catch(v=>console.error(v))},faves:s})}),e(C,{path:"/signup",element:e(Oe,{})}),e(C,{path:"/signin",element:e(Re,{})}),e(C,{path:"/profile",element:e(Je,{faves:s})}),e(C,{path:"/profile/create",element:e(st,{})}),e(C,{path:"/profile/:id/update",element:e(nt,{})})]})]})}const rt=({children:n})=>{const t=E(),[s,l]=c.exports.useState({currentUser:null,isLoading:!0,isLoggedIn:!1});c.exports.useEffect(()=>{i()},[]);const i=()=>{const h=localStorage.getItem("authToken");h?S.isLoggedIn(h).then(y=>{l({currentUser:y,isLoading:!1,isLoggedIn:!0})}).catch(y=>{l({currentUser:null,isLoading:!1,isLoggedIn:!1})}):l({currentUser:null,isLoading:!1,isLoggedIn:!1})},a=()=>{o(),i(),t("/")},o=()=>{localStorage.removeItem("authToken")},p=h=>{localStorage.setItem("authToken",h),i()},g={currentUser:s.currentUser,isLoading:s.isLoading,isLoggedIn:s.isLoggedIn,removeUser:a,storeToken:p,authenticateUser:i};return e(z.Provider,{value:g,children:n})};le.render(e(ce,{children:e(rt,{children:e(at,{})})}),document.getElementById("root"));
